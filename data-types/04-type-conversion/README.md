# 형 변환 I (Type Conversion)

> 자바스크립트에서는 자료형을 다른 자료형으로 바꾸는 형변환(Type Conversion)이 가능하다. 이를 통해 특정 상황에서 값의 자료형을 원하는 형태로 바꿔 연산하거나 활용할 수 있다. 아래는 String, Number, Boolean 함수로 자료형을 변환하는 방식과 각각의 특성을 정리한 것이다.

---

### 문자열과 숫자형의 차이점

형변환이 필요한 이유를 이해하려면 문자열과 숫자형이 서로 다르게 처리되는 방식을 살펴보는 게 좋다. 예를 들어, 아래 코드에서는 두 가지 다른 결과가 출력된다.

```jsx
console.log("10" + 5); // "105"
console.log(10 + 5); // 15
```

첫 번째 줄에서는 `"10"`과 `5`가 문자열로 연결되어 `"105"`가 출력된다. 반면 두 번째 줄에서는 숫자형 덧셈 연산이 되어 `15`가 출력된다. 자바스크립트는 자료형에 따라 연산을 다르게 처리하기 때문에, 원하는 결과를 얻으려면 자료형을 명확히 맞춰야 한다.

---

### 형변환 함수 사용법

자바스크립트에서 제공하는 `String`, `Number`, `Boolean` 함수를 사용하면 값을 다른 자료형으로 변환할 수 있다. 각 함수가 어떻게 동작하는지 자세히 살펴본다.

---

### 1. `String` 함수: 값을 문자열로 변환하기

`String` 함수는 숫자, 불린 값을 포함한 모든 값을 **문자열(string)**로 변환한다.

### 예제

```jsx
let x = 123;
let y = true;

console.log(String(x)); // "123"
console.log(typeof String(x)); // "string"

console.log(String(y)); // "true"
console.log(typeof String(y)); // "string"
```

여기서는 숫자 `123`이 `"123"`이라는 문자열로, 불린 값 `true`가 `"true"`라는 문자열로 변환되었다. `String` 함수는 어떤 값이든 문자열로 바꿔주는 역할을 한다.

---

### 2. `Number` 함수: 값을 숫자형으로 변환하기

`Number` 함수는 값을 **숫자형(number)**으로 변환한다. 숫자가 아닌 문자열은 `NaN`으로 변환되고, 불린 값은 `true`는 `1`, `false`는 `0`으로 변환된다.

### 예제

```jsx
let x = "123";
let y = "Hello";
let z = true;

console.log(Number(x)); // 123
console.log(typeof Number(x)); // "number"

console.log(Number(y)); // NaN (숫자가 아닌 문자열은 NaN으로 변환됨)
console.log(Number(z)); // 1
console.log(Number(false)); // 0
```

### 주의할 점

- **숫자가 아닌 문자열은 `NaN`으로 변환된다.** `"Hello"`나 `"abc123"` 같은 문자열은 숫자로 변환할 수 없으므로 `NaN` 값이 반환된다.
- 불린 값은 `true`가 `1`, `false`가 `0`으로 변환된다. 숫자 연산에 불린 값을 더할 때 유용하게 사용할 수 있다.

---

### 3. `Boolean` 함수: 값을 불린형으로 변환하기

`Boolean` 함수는 값을 **불린형(boolean)**으로 변환한다. 대부분의 값은 `true`가 되지만, 빈 값 또는 무의미한 값들은 `false`로 변환된다. 이 `false`로 변환되는 값들을 **falsy 값**이라고 부른다.

### `false`로 변환되는 값들 (Falsy 값)

자바스크립트에서 다음 값들은 `Boolean` 함수로 변환 시 `false`가 된다:

- `0` (숫자 0)
- `""` (빈 문자열)
- `NaN` (숫자가 아닌 값)
- `null`
- `undefined`
- `false`

### 예제

```jsx
let x = 0;
let y = "";
let z = NaN;
let w = "JavaScript";

console.log(Boolean(x)); // false
console.log(Boolean(y)); // false
console.log(Boolean(z)); // false

console.log(Boolean(w)); // true (빈 문자열이 아니므로 true)
console.log(Boolean(123)); // true (숫자 0이 아닌 경우 true)
```

위 예제에서 `0`, 빈 문자열 `""`, `NaN`은 `false`로 변환된다. `Boolean`으로 변환할 때 이 값들이 `false`가 된다는 점을 기억해 두면 좋다.

---

### 형변환의 다양한 활용

형변환을 잘 사용하면 원하는 결과를 얻는 데 유용하다. 몇 가지 자주 사용하는 형변환 사례를 예제로 정리해 둔다.

### 예제 1: 문자열을 숫자로 변환해서 더하기

문자열 `"10"`과 `"5"`를 더할 때 문자열 연결이 아닌 숫자 연산이 필요하면 `Number` 함수를 사용해 둘을 숫자로 바꿔서 더할 수 있다.

```jsx
console.log(Number("10") + Number("5")); // 15
```

위 코드는 `"10"`과 `"5"`라는 문자열을 `Number` 함수로 숫자형으로 바꾼 후 더했기 때문에 숫자 `15`가 출력된다.

### 예제 2: 숫자를 문자열로 변환해서 연결하기

숫자 `10`과 `5`를 문자열로 바꾸어 연결하고 싶다면 `String` 함수를 사용할 수 있다.

```jsx
console.log(String(10) + String(5)); // "105"
```

이 예제에서는 숫자 `10`과 `5`를 `String` 함수로 변환한 후 연결해 `"105"`가 출력된다. 자료형을 맞춰줘야 의도한 대로 결과가 나온다.

---

### 형변환 시 주의사항 및 팁

1. **`Number` 함수 사용 시 주의**

   숫자형이 아닌 문자열은 `Number` 함수로 변환할 때 `NaN`이 된다. 숫자가 아닌 문자를 포함하는 값에는 `Number` 함수 사용 시 주의가 필요하다.

   ```jsx
   console.log(Number("abc")); // NaN
   console.log(Number("123")); // 123
   ```

2. **불린형 변환의 `falsy` 값 기억하기**

   `0`, 빈 문자열 `""`, `NaN`, `null`, `undefined`는 모두 `Boolean`으로 변환 시 `false`로 처리된다. 이 값들이 `Boolean` 함수로 변환될 때 `false`가 된다는 점을 기억하면 논리 연산에서 도움이 된다.

3. **`String` 함수로 값을 안전하게 변환**

   `String` 함수는 거의 모든 값을 문자열로 안전하게 변환한다. 특별한 예외나 에러 없이 값을 일관되게 문자열로 처리하고 싶을 때는 `String` 함수를 사용하면 된다.

---

### 요약

> String, Number, Boolean 함수로 각각 문자열, 숫자형, 불린형으로 형변환할 수 있다.숫자로 변환 시 \*숫자가 아닌 문자열은 NaN이 되고, true는 1, false는 0으로 변환된다.Boolean 함수는 대부분의 값을 true로 변환하지만, 0, 빈 문자열 "", NaN, null, undefined, false 같은 값은 false로 변환된다. 이를 falsy 값이라고 부른다.
>
> 형변환을 통해 원하는 자료형을 맞추어 일관된 연산을 할 수 있으며, 자료형에 따른 연산 처리를 명확하게 할 수 있다.

# 형 변환 II (Type Conversion)

자바스크립트에서는 직접 **형변환 함수를 쓰지 않더라도**, 연산을 할 때 **자동으로 형변환이 이루어진다**. 이 자동 형변환은 자바스크립트가 **일정한 규칙**에 따라 수행하기 때문에, 다른 자료형끼리도 연산이 가능해진다. 예를 들어, **`숫자`**, **`문자열`**, **`불리언`** 등이 섞인 표현식을 연산할 때 자바스크립트가 알아서 각 자료형을 필요한 형태로 바꿔준다.

하지만 **자동 형변환** 덕분에 코드가 짧고 간단하게 작성될 수 있는 반면, **예상하지 못한 결과**가 나올 때도 있다. 자바스크립트는 연산이 가능한 한 코드가 중단되지 않도록 **서로 다른 자료형도 맞춰서 처리**하려고 하기 때문에, 특히 더하기(`+`) 연산자처럼 숫자 덧셈과 문자열 연결을 동시에 수행하는 경우에는 더욱 주의해야 한다.

> 이번 글에서는 자바스크립트의 산술 연산자, 관계 비교 연산자, 동등 및 일치 연산자가 어떻게 자동 형변환을 처리하는지 깊이 있게 살펴보고, 예상하지 못한 결과가 나올 수 있는 부분을 정리해봤다.

## 1. 산술 연산자 (+, -, \*, /, %, \*\*)

자바스크립트의 산술 연산자에는 `+`, `-`, `*`, `/`, `%`, `**`가 있다. 기본적으로 산술 연산은 **연산 전에 두 값을 숫자형으로 변환**해서 계산하지만, **`+` 연산자는 예외적으로 문자열이 포함되면 문자열 연결을 우선**한다.

> ⚠️ 주의: + 연산자를 사용할 때는 자동 형변환이 어떻게 이루어지는지 주의 깊게 살펴봐야 한다.

### 문자열과 `+` 연산자

`+` 연산자는 **덧셈**과 **문자열 연결** 두 가지 역할을 한다. 피연산자 중 하나라도 **문자열이 포함되면 전체를 문자열로 변환**해서 연결하기 때문에, 예상치 못한 결과가 발생할 수 있다.

### 예제: `+` 연산자와 자동 형변환

```jsx
console.log("4" + 2); // '42' (문자열 연결)
console.log("Hello" + true); // 'Hellotrue' (문자열 연결)
console.log("10" + null); // '10null' (문자열 연결)
console.log("5" + undefined); // '5undefined' (문자열 연결)
```

위 예제에서 볼 수 있듯이, `+` 연산자에서 하나라도 문자열이 포함되면 전체가 문자열로 변환되어 **문자열 연결**이 일어난다. 예를 들어, `'4' + 2`는 숫자 2가 문자열로 변환되어 `'42'`가 된다.

### 💡 숫자형 덧셈을 위한 명시적 변환

`+` 연산자에서 숫자 덧셈을 명확히 하려면, `Number()`로 문자열을 명시적으로 숫자형으로 변환한 후 연산하는 것이 좋다.

```jsx
console.log(Number("4") + 2); // 6 (명시적 숫자 변환)
```

## 나머지 산술 연산자 (-, \*, /, %, \*\*)

나머지 산술 연산자(`-`, `*`, `/`, `%`, `**`)는 연산 전에 **두 피연산자를 숫자형으로 변환**해서 계산을 진행한다. 문자열과 다른 자료형이 만나더라도 숫자로 변환되어 연산되기 때문에 `+` 연산자와는 다르게 작동한다.

### 예제: 나머지 산술 연산과 자동 형변환

```jsx
console.log("4" - 2); // 2 (문자열이 숫자로 변환되어 연산)
console.log("4" * 2); // 8 (문자열이 숫자로 변환되어 연산)
console.log("4" / 2); // 2 (문자열이 숫자로 변환되어 연산)
console.log("10" % 3); // 1 (문자열이 숫자로 변환되어 연산)
console.log(2 ** "3"); // 8 (문자열이 숫자로 변환되어 연산)
console.log("hello" - 1); // NaN (숫자로 변환 불가한 문자열)
console.log(true * 3); // 3 (true가 1로 변환)
console.log(false - 1); // -1 (false가 0으로 변환)
console.log(null + 5); // 5 (null이 0으로 변환)
console.log(undefined + 3); // NaN (undefined는 숫자로 변환 불가)
```

## 2. 관계 비교 연산자 (<, >, <=, >=)

관계 비교 연산자(`>`, `<`, `>=`, `<=`)는 대부분 **두 값을 숫자형으로 변환 후 비교**한다. 단, 문자열끼리 비교하는 경우는 예외로 **알파벳 순서**에 따라 비교한다.

### 예제: 관계 비교 연산의 자동 형변환

```jsx
console.log("3" > 2); // true ('3'이 숫자 3으로 변환됨)
console.log(true < 2); // true (true가 1로 변환됨)
console.log("2" <= 2); // true ('2'가 숫자 2로 변환됨)
console.log("abc" > "a"); // true (문자열 비교, 알파벳 순서)
console.log("abc" > "abd"); // false (알파벳 순서)
console.log("hello" < "world"); // true (문자열 비교, 알파벳 순서)
```

> ⚠️ 주의: NaN이 포함된 모든 비교는 항상 false로 평가된다. 예를 들어, NaN < 5, NaN > 1, NaN == NaN은 모두 false다.

## 3. 동등 및 일치 연산자 (==, ===)

자바스크립트의 **동등(==)** 연산자와 **일치(===)** 연산자는 **형변환 허용 여부**에서 차이가 있다.

- `==` 연산자: **형변환을 허용**하며, 형이 다르더라도 값이 같으면 true를 반환한다.
- `===` 연산자: **형변환 없이** 값과 자료형이 모두 같아야 true를 반환한다.

### 예제: 동등과 일치 연산의 자동 형변환

```jsx
console.log(1 == "1"); // true ('1'이 숫자 1로 변환됨)
console.log(1 === "1"); // false (형변환 없음, 자료형이 다름)
console.log(true == 1); // true (true가 1로 변환됨)
console.log(true === 1); // false (형변환 없음, 자료형이 다름)
console.log(null == undefined); // true (둘 다 '비어 있음'으로 처리됨)
console.log(null === undefined); // false (자료형이 다름)
```

> ⚠️ 주의: == 연산자는 자동으로 형변환이 일어나기 때문에 예상치 못한 결과가 발생할 수 있다. 자바스크립트에서는 형변환을 허용하는 == 연산자를 사용할 때 논리적 오류가 발생할 가능성이 높다. 일반적으로 일치 연산자(===)를 사용하는 것이 안전하다.

## 요약 및 정리 📌

| 연산자 | 설명                                    | 예제                | 주의할 점                                              |
| ------ | --------------------------------------- | ------------------- | ------------------------------------------------------ |
| `+`    | 숫자 덧셈 또는 문자열 연결              | `'4' + 2 ➔ '42'`    | 피연산자 중 하나라도 문자열이면 전체가 문자열로 변환됨 |
| `-`    | 뺄셈                                    | `'4' - true ➔ 3`    | 숫자형 변환 후 연산                                    |
| `*`    | 곱셈                                    | `'4' * 2 ➔ 8`       | 숫자형 변환 후 연산                                    |
| `/`    | 나눗셈                                  | `'4' / 2 ➔ 2`       | 숫자형 변환 후 연산                                    |
| `%`    | 나머지 연산                             | `5 % 2 ➔ 1`         | 숫자형 변환 후 연산                                    |
| `**`   | 거듭제곱                                | `2 ** 3 ➔ 8`        | 숫자형 변환 후 연산                                    |
| `==`   | 형변환 허용 후 비교                     | `1 == '1' ➔ true`   | 예상치 못한 결과를 초래할 수 있음                      |
| `===`  | 형변환 없이 자료형과 값이 동일한지 비교 | `1 === '1' ➔ false` | 더 안전한 비교                                         |

> 산술 연산자: 대부분 숫자형으로 변환 후 연산을 진행하지만, + 연산자는 문자열 연결 기능이 있어 피연산자 중 하나가 문자열이면 전체가 문자열로 변환된다. NaN은 연산에서 항상 NaN을 반환한다.관계 비교 연산자: 숫자형으로 변환 후 비교하며, 문자열끼리 비교할 때는 알파벳 순서로 비교된다. NaN을 포함한 비교는 항상 false가 된다.동등(==)과 일치(===) 연산자: ==는 형변환을 허용해 예상치 못한 결과를 초래할 수 있다. ===는 형변환 없이 값과 자료형이 모두 같을 때만 true를 반환한다. 일반적으로 ===를 사용하는 것이 안전하다.

> 명시적인 형변환과 일치 연산자로 안전한 코드 작성하기
>
> 자바스크립트의 자동 형변환 덕분에 코드가 유연하게 작동하지만, **명시적으로 형변환**을 수행하고, **비교에서는 `===` 연산자를 사용하는 것이 코드의 안정성을 높이는 방법**이다.
